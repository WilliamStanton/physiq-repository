{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PhysIQ{% block title %}{% endblock title %}</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="icon" type="image/png" href="{% static '/favicon/favicon-96x96.png' %}" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="{% static '/favicon/favicon.svg' %}" />
    <link rel="shortcut icon" href="{% static '/favicon/favicon.ico' %}" />
    <link rel="apple-touch-icon" sizes="180x180" href="{% static '/favicon/apple-touch-icon.png' %}" />
    <link rel="manifest" href="{% static '/favicon/site.webmanifest' %}" />
    {% block head %}{% endblock %}
</head>
<body class="bg-dark text-light">
{% include "components/navbar.html" %}

<main class="container">
    {% block content %}{% endblock %}
</main>

{% include "components/footer.html" %}

<!-- ðŸ” Shared Photo Preview Modal -->
<div class="modal fade" id="photoPreviewModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered mx-auto modal-lg">
    <div class="modal-content">
      <div class="position-relative">
        <img id="photoPreviewImg" src="" class="w-100 rounded-4 shadow-lg" alt="Preview" style="object-fit: contain; max-height: 80vh;">
        <button type="button" class="btn-close btn-close-white position-absolute top-0 end-0 m-3" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="p-3 text-center text-light small opacity-0" id="photoPreviewCaption"></div>
    </div>
  </div>
</div>

<div class="modal fade" id="mealModal" tabindex="-1" aria-labelledby="mealModalLabel" aria-hidden="true"
     data-bs-theme="dark">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content bg-dark text-light border-0 rounded-4 shadow-lg">
            <div class="modal-header border-secondary">
                <h5 class="modal-title fw-bold" id="mealModalLabel">Meal Details</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div id="meal-details"></div>
            </div>
            <div class="modal-footer border-secondary">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modifyPlanModal" tabindex="-1" data-bs-theme="dark">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-dark text-light border-secondary rounded-4">

            <div class="modal-header border-secondary">
                <h5 class="modal-title">Modify Workout Plan</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body">

                <label class="form-label">Primary Goal</label>
                <input id="goal-input" class="form-control form-control-sm mb-3"
                       placeholder="e.g. Build muscle, lose fat">

                <label class="form-label">Training Schedule</label>
                <input id="schedule-input" class="form-control form-control-sm mb-3" placeholder="e.g. Monâ€“Sat">

                <label class="form-label">Notes for Coach AI</label>
                <textarea id="notes-input" class="form-control form-control-sm"
                          placeholder="e.g. I really enjoyed tricep pushdowns last week!" rows="3"></textarea>

            </div>

            <div class="modal-footer border-secondary d-flex justify-content-between">
                <button id="submit-modify-plan" class="btn btn-primary">Generate Updated Plan</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="mealModal" tabindex="-1" aria-labelledby="mealModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content bg-dark text-light border-0 rounded-4 shadow-lg">
            <div class="modal-header border-secondary">
                <h5 class="modal-title fw-bold" id="mealModalLabel">Meal Details</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div id="meal-details"></div>
            </div>
            <div class="modal-footer border-secondary">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- EDIT DAY MODAL -->
<div class="modal fade" id="editDayModal" tabindex="-1" data-bs-theme="dark">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-dark text-light border-secondary rounded-4">

            <div class="modal-header border-secondary">
                <h5 class="modal-title">Edit Day</h5>
                <button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body">
                <input type="hidden" id="edit-date">

                <!-- Workout -->
                <div class="mb-4">
                    <label class="form-label fw-semibold">Workout Status</label>
                    <div class="btn-group w-100">

                        <input type="radio" class="btn-check" id="workout-done" name="workout-status" value="done">
                        <label class="btn btn-outline-success" for="workout-done">Done</label>

                        <input type="radio" class="btn-check" id="workout-rest" name="workout-status" value="rest">
                        <label class="btn btn-outline-secondary" for="workout-rest">Rest</label>

                        <input type="radio" class="btn-check" id="workout-missed" name="workout-status" value="missed">
                        <label class="btn btn-outline-danger" for="workout-missed">Missed</label>

                    </div>
                </div>

                <!-- Nutrition -->
                <div class="mb-4">
                    <label class="form-label fw-semibold">Nutrition Status</label>
                    <div class="btn-group w-100">

                        <input type="radio" class="btn-check" id="nutrition-hit" name="nutrition-status" value="hit">
                        <label class="btn btn-outline-success" for="nutrition-hit">Hit</label>

                        <input type="radio" class="btn-check" id="nutrition-none" name="nutrition-status" value="none">
                        <label class="btn btn-outline-secondary" for="nutrition-none">None</label>

                        <input type="radio" class="btn-check" id="nutrition-missed" name="nutrition-status" value="missed">
                        <label class="btn btn-outline-danger" for="nutrition-missed">Missed</label>

                    </div>
                </div>

                <!-- Notes -->
                <label class="form-label fw-semibold">Notes</label>
                <textarea id="day-notes" class="form-control" rows="3"
                          placeholder="Add details about today's workout or nutrition..."></textarea>

            </div>

            <div class="modal-footer border-secondary">
                <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button class="btn btn-primary" id="save-day-btn">Save</button>
            </div>

        </div>
    </div>
</div>


{% block modals %}
<!-- Edit Day Modal - MUST live here globally -->
<div class="modal fade" id="editDayModal" tabindex="-1" data-bs-theme="dark">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-dark text-light border-secondary rounded-4">
            <div class="modal-header border-secondary">
                <h5 class="modal-title" id="editDayModalLabel">Edit Day</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body">
                <input type="hidden" id="edit-date">

                <div class="mb-4">
                    <label class="form-label fw-semibold">Workout Status</label>
                    <div class="btn-group w-100" role="group">
                        <input type="radio" class="btn-check" name="workout-status" id="workout-done" value="done">
                        <label class="btn btn-outline-success" for="workout-done">Done</label>

                        <input type="radio" class="btn-check" name="workout-status" id="workout-rest" value="rest">
                        <label class="btn btn-outline-secondary" for="workout-rest">Rest</label>

                        <input type="radio" class="btn-check" name="workout-status" id="workout-missed" value="missed">
                        <label class="btn btn-outline-danger" for="workout-missed">Missed</label>
                    </div>
                </div>

                <div class="mb-4">
                    <label class="form-label fw-semibold">Nutrition Status</label>
                    <div class="btn-group w-100" role="group">
                        <input type="radio" class="btn-check" name="nutrition-status" id="nutrition-hit" value="hit">
                        <label class="btn btn-outline-success" for="nutrition-hit">Hit</label>

                        <input type="radio" class="btn-check" name="nutrition-status" id="nutrition-none" value="none">
                        <label class="btn btn-outline-secondary" for="nutrition-none">None</label>

                        <input type="radio" class="btn-check" name="nutrition-status" id="nutrition-missed" value="missed">
                        <label class="btn btn-outline-danger" for="nutrition-missed">Missed</label>
                    </div>
                </div>

                <div class="mb-3">
                    <label class="form-label fw-semibold">Notes</label>
                    <textarea id="day-notes" class="form-control" rows="3" placeholder="Add notes about today..."></textarea>
                </div>
            </div>

            <div class="modal-footer border-secondary">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="save-day-btn">Save</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
{% block scripts %}{% endblock %}
<script src="{% static '/js/progress.js' %}"></script>
</body>
</html>